{% extends 'base.html.twig' %}



{% block body %}
    <div id="profile-container">
        <div class="container-fluid">
            {% include 'common/flash-messages.html.twig' %}

            <!-- Breadcrumbs -->
            <div>
                {{ wo_render_breadcrumbs() }}
            </div>

            <!-- right menu -->
            <div class="container bg-white pt-4">
                4000 0025 0000 3155
                <form action="{{ path('payment.checkout')}}" method="post" id="payment-form">

                    <input id="cardholder-name" type="text">
                    <!-- placeholder for Elements -->
                    <div id="card-element"></div>
                    <div id="card-result"></div>
                    <input type="button" id="card-button" value="Save Card">

                    <br/><br/><br/><br/>
                    <input type="text" name="price" id="price" value="25" />
                    <input type="text" name="ccc" id="paymentMethodId" value="xxxx" />
                </form>

                <br />
                <br />
            </div>
        </div>
    </div>
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link href="{{ absolute_url('/homepage-child/css/payment.css') }}" rel="stylesheet">
{% endblock %}

{% block customJavascripts %}
    <script src="http://js.stripe.com/v3/"></script>
    <script>
        var stripe = Stripe('pk_test_295Ozc1q3CtE3CMFJDIfNYtF00dVvfQVOZ');
        var elements = stripe.elements();

        // Custom styling can be passed to options when creating an Element.
        var style = {
            base: {
                iconColor: 'red',
                color: 'black',
                fontWeight: 500,
                fontFamily: 'Roboto, Open Sans, Segoe UI, sans-serif',
                fontSize: '16px',
                fontSmoothing: 'antialiased',
                ':-webkit-autofill': {
                    color: 'black',
                },
                '::placeholder': {
                    color: 'red',
                },
            },
            invalid: {
                iconColor: '#FFC7EE',
                color: '#FFC7EE',
            },
        };
        var elements = stripe.elements();
        var cardElement = elements.create('card');
        cardElement.mount('#card-element');

        var cardholderName = document.getElementById('cardholder-name');
        var cardButton = document.getElementById('card-button');
        var resultContainer = document.getElementById('card-result');
        var pmContainer = document.getElementById('paymentMethodId');

        cardButton.addEventListener('click', function(ev) {
            stripe.createPaymentMethod({
                type: 'card',
                card: cardElement,
                billing_details: {
                    name: cardholderName.value,
                },
            }).then(function(result) {
                if (result.error) {
                    // Display error.message in your UI
                    resultContainer.textContent = result.error.message;
                } else {
                    // You have successfully created a new PaymentMethod
                    resultContainer.textContent = "Created payment method: " + result.paymentMethod.id;
                    pmContainer.value = result.paymentMethod.id;
                    $("#payment-form").submit();
                }
            });
        });
    </script>
{% endblock %}


