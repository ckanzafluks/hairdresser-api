{% extends 'base.html.twig' %}

{% block title %}Gestion des sessions{% endblock %}

{% block body %}
    {% include '/common/flash-messages.html.twig' %}

    <div class="container-fluid bg-white">
        <div class="container pb-4">
            <div class="col-xs-12 col-sm-12 pt-5">
                <div>
                    {{ wo_render_breadcrumbs() }}
                </div>

                <div class="alert alert-primary mt-3 text-center" role="alert">
                    <h3>Status actuel de la proposition : {{ preSession.getStatus().getName() }}</h3>
                </div>

                {% if preSession.getStatus().value == getStatusConstant('STATUS_VALIDE') %} {# pour les pre-sessions validées #}
                    <div class="row pt-5 justify-content-center">
                        <a href="{{ path('pre-sessions.listing.detail.session-create', { 'id' : app.request.get("id"), 'type' : app.request.get("type") }) }}">
                            <button type="button" class="btn btn-primary bg-blue m-1">
                                <i class="fas fa-user-plus"></i> Créer une session
                            </button>
                        </a>
                        <a href="{{ path('pre-sessions.listing.detail.session.list', { 'id' : app.request.get("id"), 'type' : app.request.get("type") }) }}">
                            <button type="button" class="btn btn-primary bg-blue m-1">
                                <i class="fas fa-align-justify"></i> Liste des sessions <span class="badge badge-secondary"> {{ sessionsList|length }}</span>
                            </button>
                        </a>
                    </div>
                {% elseif preSession.getStatus().value == 4 %}
                {% endif %}

                {# affiche le bouton des actions possibles d'une presession selon son status ( valide ou non ) #}
                {% if preSession.getReceiver() == app.user and preSession.getStatus().value == getStatusConstant('STATUS_ATTENTE_VALIDATION') %}
                    {{ displayAllButtonsAction(preSession) }}
                {% endif %}

                {% include 'account-presessions/sections/listing-details-presession-content.html.twig' with {'preSession' : preSession} %}

            </div>
        </div>
    </div>


    {% include '/account-presessions/sections/modalActionContreProposition/modalContrepropositionDate.html.twig'  with {'preSession' : preSession} %}
    {% include '/account-presessions/sections/modalActionContreProposition/modalAcceptePresession.html.twig'  with {'preSession' : preSession} %}
    {% include '/account-presessions/sections/modalActionContreProposition/modalAnnulerPresession.html.twig'  with {'preSession' : preSession} %}

{% endblock %}